<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>입장료 계산기</title>
        <h1> 입장료 계산기</h1>
        <style>
            
        </style>
        <script src="moment.min.js"></script>
    </head>
    <body>
        <div>
            <p> 성인 수</p>
            <input type="text" value="" id="adult"placeholder="인원 수를 입력하세요">
            <P> 어린이 수</P>
            <input type="text" value="" id="child" placeholder="인원 수를 입력하세요">
            <button onclick="calc()"> 계산 </button>
        </div>
        <div id = "output1"> 총 입장료 </div>
        <div id = "output3"> 현재 시간 </div>
        
        <div>
            <input type = "radio" name = "person" value = "단체" checked><span>예</span>
            <input type = "radio" name = "person" value = "개인" ><span>아니요</span>
        </div>
        <div>
            <img id = "output2" src = "images/cat_run.png">
        </div>

        <button onclick="randomNumber()">추첨하기</button>
        <div>
            <input type = "number" id = "people1" value = "" placeholder="인원 수를 입력하세요">
        </div>

        <div id = "output4"> 랜덤번호추첨</div>
        <script>
            

            function randomNumber(){
                let random = [];
                let peopleNum = Number(document.querySelector("#people1").value);    
                
                let randomNum = Math.floor((Math.random()*peopleNum)+1);
                random.push(randomNum);
                document.querySelector("#output4").textContent = `랜덤 번호 : ${random[0]}`;
                
                
            }
            

            let calc = () => {
                let input1 = document.querySelector("#adult");
                let input2 = document.querySelector("#child");
                let adultStr = input1.value;
                let childStr = input2.value;

                let adult = Number(adultStr);
                let child = Number(childStr);
                let audltFee = 20000;
                let childFee = 9900;
                let afterAdultFee = 12000;
                let afterChildFee = 4500;

                if(isNaN(adult) || isNaN(child)){
                    alert('입력된 값이 숫자가 아닙니다.');
                    const output2 = document.querySelector('#output2');
                    output2.src= 'images/dog_run.png'
                    return;
                }
                
                const radios = document.getElementsByName('person');
                const selected = Array.from(radios).find(elem => elem.checked);
                alert(`계산완료 : ${selected.value}`);
                let price;
                
                const curTime1 = moment().hour();

                if(curTime1 >= 12){
                    price = adult * afterAdultFee + child * afterChildFee;
                } else {
                    price = adult * audltFee + child * childFee;
                }

                if(selected.value == '단체' && adult+child >= 5 ){
                    console.log('단체 할인');
                    price = price * 0.8;
                     
                } else if (selected.value == '개인'){
                    console.log('개인 할인');
                    price;
                }
                let output1 = document.querySelector('#output1');
                output1.innerHTML = `<p> 총합 : ${price} </p>`;
                const output3 = document.querySelector('#output3');
                setInterval(() => {
                    const curTime = moment().format('YYYY-MM-DD HH:mm:ss');
                    output3.innerHTML = `<p> ${curTime} </p>`;
                }, 1000);
               
            }

            
        </script>
        
    </body>
</html>
